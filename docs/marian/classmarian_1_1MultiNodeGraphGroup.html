<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Marian: marian::MultiNodeGraphGroup Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Marian
   &#160;<span id="projectnumber">v1.5.0</span>
   </div>
   <div id="projectbrief">A C++ GPU-specific Neural Machine Translation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemarian.html">marian</a></li><li class="navelem"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html">MultiNodeGraphGroup</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classmarian_1_1MultiNodeGraphGroup-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">marian::MultiNodeGraphGroup Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="graph__group__multinode_8h_source.html">graph_group_multinode.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for marian::MultiNodeGraphGroup:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmarian_1_1MultiNodeGraphGroup.png" usemap="#marian::MultiNodeGraphGroup_map" alt=""/>
  <map id="marian::MultiNodeGraphGroup_map" name="marian::MultiNodeGraphGroup_map">
<area href="classmarian_1_1GraphGroup.html" alt="marian::GraphGroup" shape="rect" coords="0,0,183,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3f349dc4b0516dc2acf9f6604ce2138d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a3f349dc4b0516dc2acf9f6604ce2138d">setScheduler</a> (Ptr&lt; <a class="el" href="classmarian_1_1Scheduler.html">Scheduler</a> &gt; scheduler)</td></tr>
<tr class="separator:a3f349dc4b0516dc2acf9f6604ce2138d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31833ee0e3fe3d72352c53088c6c4d82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a31833ee0e3fe3d72352c53088c6c4d82">MultiNodeGraphGroup</a> (Ptr&lt; <a class="el" href="classmarian_1_1Config.html">Config</a> &gt; options)</td></tr>
<tr class="separator:a31833ee0e3fe3d72352c53088c6c4d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00189cefd3be9c8c22c22ac1930d5637"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a00189cefd3be9c8c22c22ac1930d5637">~MultiNodeGraphGroup</a> ()</td></tr>
<tr class="separator:a00189cefd3be9c8c22c22ac1930d5637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5401b9e733d09a63454e27ce15ef51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#acd5401b9e733d09a63454e27ce15ef51">update</a> (Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt; batch)</td></tr>
<tr class="separator:acd5401b9e733d09a63454e27ce15ef51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667246d307a44db4afe1e9700eccb2e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a667246d307a44db4afe1e9700eccb2e3">load</a> ()</td></tr>
<tr class="separator:a667246d307a44db4afe1e9700eccb2e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82b1eb2e65a7b8cf20d3de2de8ca286"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ae82b1eb2e65a7b8cf20d3de2de8ca286">save</a> (bool final=false)</td></tr>
<tr class="separator:ae82b1eb2e65a7b8cf20d3de2de8ca286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a014eeee7573962b7c62ed441789103"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a0a014eeee7573962b7c62ed441789103">save</a> (Ptr&lt; <a class="el" href="classmarian_1_1ExpressionGraph.html">ExpressionGraph</a> &gt; graph, bool final=false)</td></tr>
<tr class="separator:a0a014eeee7573962b7c62ed441789103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fbb0b76109d6a992ef02bc4d2a83b0"><td class="memItemLeft" align="right" valign="top">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1BatchStats.html">data::BatchStats</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a82fbb0b76109d6a992ef02bc4d2a83b0">collectStats</a> ()</td></tr>
<tr class="separator:a82fbb0b76109d6a992ef02bc4d2a83b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaaf0cb51d09b5f4a5ef3e34144c550f"><td class="memItemLeft" align="right" valign="top"><a id="aaaaf0cb51d09b5f4a5ef3e34144c550f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>finalize</b> ()</td></tr>
<tr class="separator:aaaaf0cb51d09b5f4a5ef3e34144c550f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmarian_1_1GraphGroup"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmarian_1_1GraphGroup')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a></td></tr>
<tr class="memitem:a5d421471110114cb3c6816eb444043df inherit pub_methods_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="a5d421471110114cb3c6816eb444043df"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GraphGroup</b> (Ptr&lt; <a class="el" href="classmarian_1_1Config.html">Config</a> &gt; options)</td></tr>
<tr class="separator:a5d421471110114cb3c6816eb444043df inherit pub_methods_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10e066a0b32b78ae688fa88fd9ed6ea2 inherit pub_methods_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top">virtual Ptr&lt; <a class="el" href="classmarian_1_1data_1_1BatchStats.html">data::BatchStats</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1GraphGroup.html#a10e066a0b32b78ae688fa88fd9ed6ea2">collectStats</a> (Ptr&lt; <a class="el" href="classmarian_1_1ExpressionGraph.html">ExpressionGraph</a> &gt; graph, Ptr&lt; <a class="el" href="classmarian_1_1models_1_1ModelBase.html">models::ModelBase</a> &gt; model, size_t multiplier=1)</td></tr>
<tr class="separator:a10e066a0b32b78ae688fa88fd9ed6ea2 inherit pub_methods_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a731afb1c17bd78851dbfd18061221e9d"><td class="memItemLeft" align="right" valign="top">Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a731afb1c17bd78851dbfd18061221e9d">newTensor</a> (int size, Ptr&lt; <a class="el" href="classmarian_1_1Backend.html">Backend</a> &gt; backend)</td></tr>
<tr class="separator:a731afb1c17bd78851dbfd18061221e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2b3390b41733e9fc90c8db76a767cc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a2f2b3390b41733e9fc90c8db76a767cc">init</a> (Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt; batch)</td></tr>
<tr class="separator:a2f2b3390b41733e9fc90c8db76a767cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5d0d8beb637cdabf9f35259264888f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a7a5d0d8beb637cdabf9f35259264888f">setupMPI</a> ()</td></tr>
<tr class="separator:a7a5d0d8beb637cdabf9f35259264888f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1d14df82066987ab98ed94e1def9ab8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aa1d14df82066987ab98ed94e1def9ab8">setupClients</a> (Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt; batch)</td></tr>
<tr class="separator:aa1d14df82066987ab98ed94e1def9ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f58d943fc6cfec09d3451fa0503ec94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a0f58d943fc6cfec09d3451fa0503ec94">runBatchThroughClientGraphs</a> (Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt; batch)</td></tr>
<tr class="separator:a0f58d943fc6cfec09d3451fa0503ec94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef80e64d13d54883a7f2d3a6ed4895e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#abef80e64d13d54883a7f2d3a6ed4895e">calculateNodeSizes</a> ()</td></tr>
<tr class="separator:abef80e64d13d54883a7f2d3a6ed4895e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b7a90d95f0a7633cd7af685e343cb23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a5b7a90d95f0a7633cd7af685e343cb23">initClientCpuBuffers</a> ()</td></tr>
<tr class="separator:a5b7a90d95f0a7633cd7af685e343cb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc33e29e65aa5f21ba9dec1a0153e108"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#acc33e29e65aa5f21ba9dec1a0153e108">initClientCommOverlapVars</a> ()</td></tr>
<tr class="separator:acc33e29e65aa5f21ba9dec1a0153e108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350f1a29dce33ccd05bff4f64afbf585"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a350f1a29dce33ccd05bff4f64afbf585">initClientCommOverlapGpuTensors</a> ()</td></tr>
<tr class="separator:a350f1a29dce33ccd05bff4f64afbf585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88eea2912b57b71bafe0cdb285e1bf2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a88eea2912b57b71bafe0cdb285e1bf2c">setupServerShards</a> ()</td></tr>
<tr class="separator:a88eea2912b57b71bafe0cdb285e1bf2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96aaa101eea41c20f739af42fec9c85e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a96aaa101eea41c20f739af42fec9c85e">calculateShardSizes</a> ()</td></tr>
<tr class="separator:a96aaa101eea41c20f739af42fec9c85e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac47a92750d8f86553a0db24bfffc40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#afac47a92750d8f86553a0db24bfffc40">initShardGpuTensors</a> ()</td></tr>
<tr class="separator:afac47a92750d8f86553a0db24bfffc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987ce495465fef1efa0826403bc406e5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a987ce495465fef1efa0826403bc406e5">launchServerThread</a> ()</td></tr>
<tr class="separator:a987ce495465fef1efa0826403bc406e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abac97e7cca7bead4e7a991a452d5dccd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#abac97e7cca7bead4e7a991a452d5dccd">shutDownServerThread</a> ()</td></tr>
<tr class="separator:abac97e7cca7bead4e7a991a452d5dccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d168ef722d208a64705bd5f014d4d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aa0d168ef722d208a64705bd5f014d4d0">launchCommOverlapThreads</a> ()</td></tr>
<tr class="separator:aa0d168ef722d208a64705bd5f014d4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c64ff4b69437fb0351b78b51b9bff1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a0c64ff4b69437fb0351b78b51b9bff1c">shutDownCommOverlapThreads</a> ()</td></tr>
<tr class="separator:a0c64ff4b69437fb0351b78b51b9bff1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c9c4690c1968c497a659d38ac06b068"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a9c9c4690c1968c497a659d38ac06b068">synchronizeWithServerShards</a> (Tensor newGrads, Tensor oldParams, int gpu, size_t batchWords=0)</td></tr>
<tr class="separator:a9c9c4690c1968c497a659d38ac06b068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee13b3da619fe59e4e1e2be4afc1b10f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aee13b3da619fe59e4e1e2be4afc1b10f">execute</a> (Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt; batch)</td></tr>
<tr class="separator:aee13b3da619fe59e4e1e2be4afc1b10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124becc314f5d43893757f38c815d3c5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a124becc314f5d43893757f38c815d3c5">signalFinishedToServerShards</a> ()</td></tr>
<tr class="separator:a124becc314f5d43893757f38c815d3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac25f643f3ebcac1b7185d7edd53d753"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aac25f643f3ebcac1b7185d7edd53d753">loadDeviceConfig</a> (std::vector&lt; size_t &gt; deviceConfig)</td></tr>
<tr class="separator:aac25f643f3ebcac1b7185d7edd53d753"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a12cef92d07f909dcd5af15567ad379d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a12cef92d07f909dcd5af15567ad379d0">initialized_</a> {false}</td></tr>
<tr class="separator:a12cef92d07f909dcd5af15567ad379d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ff84fbfa935667bb300eeec3398ce3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Ptr&lt; <a class="el" href="classmarian_1_1TensorAllocator.html">TensorAllocator</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a84ff84fbfa935667bb300eeec3398ce3">allocators_</a></td></tr>
<tr class="separator:a84ff84fbfa935667bb300eeec3398ce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946e4ba36387648bbcfa2b6469b726b9"><td class="memItemLeft" align="right" valign="top">ThreadPool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a946e4ba36387648bbcfa2b6469b726b9">clientThreadPool_</a></td></tr>
<tr class="separator:a946e4ba36387648bbcfa2b6469b726b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342faadc2dfc096266ff5ced4ce2146a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Ptr&lt; <a class="el" href="classmarian_1_1models_1_1ModelBase.html">models::ModelBase</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a342faadc2dfc096266ff5ced4ce2146a">clientBuilders_</a></td></tr>
<tr class="separator:a342faadc2dfc096266ff5ced4ce2146a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54796591790abe80e914b9142e3cb6f2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Ptr&lt; <a class="el" href="classmarian_1_1ExpressionGraph.html">ExpressionGraph</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a54796591790abe80e914b9142e3cb6f2">clientGraphs_</a></td></tr>
<tr class="separator:a54796591790abe80e914b9142e3cb6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f7957b2900e161ba7f759331a3141a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ab1f7957b2900e161ba7f759331a3141a">devices_</a></td></tr>
<tr class="separator:ab1f7957b2900e161ba7f759331a3141a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5828f1a7e2fdcbaa20cec8dad5b0a3f1"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a5828f1a7e2fdcbaa20cec8dad5b0a3f1">mutexClientInit_</a></td></tr>
<tr class="separator:a5828f1a7e2fdcbaa20cec8dad5b0a3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa32a75587c2c31f01dae3bd990abd73b"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aa32a75587c2c31f01dae3bd990abd73b">schedulerMutex_</a></td></tr>
<tr class="separator:aa32a75587c2c31f01dae3bd990abd73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33edb88079b692db2be9da60f461e1d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#af33edb88079b692db2be9da60f461e1d">batchIter_</a> = 0</td></tr>
<tr class="separator:af33edb88079b692db2be9da60f461e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858e4728340e16cbcbabbe11786ddff6"><td class="memItemLeft" align="right" valign="top">std::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a858e4728340e16cbcbabbe11786ddff6">serverShardThread_</a></td></tr>
<tr class="separator:a858e4728340e16cbcbabbe11786ddff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca55146090dc27eedaf7d1b8aef9a12"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aaca55146090dc27eedaf7d1b8aef9a12">serverShardBufferCPU_</a></td></tr>
<tr class="separator:aaca55146090dc27eedaf7d1b8aef9a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeacc10ea2646efd5f8bab29b9febfb6e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aeacc10ea2646efd5f8bab29b9febfb6e">shardParams_</a></td></tr>
<tr class="separator:aeacc10ea2646efd5f8bab29b9febfb6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae782e428f11b35ba7d407cd689425354"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ae782e428f11b35ba7d407cd689425354">shardGrads_</a></td></tr>
<tr class="separator:ae782e428f11b35ba7d407cd689425354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b81e7bbe877f67931f38cdc3cc8fc6d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Ptr&lt; <a class="el" href="classmarian_1_1OptimizerBase.html">OptimizerBase</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a4b81e7bbe877f67931f38cdc3cc8fc6d">shardOptimizers_</a></td></tr>
<tr class="separator:a4b81e7bbe877f67931f38cdc3cc8fc6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a929f87c2cd49f8aabb3992ec847b75cb"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a929f87c2cd49f8aabb3992ec847b75cb">shardMutex_</a></td></tr>
<tr class="separator:a929f87c2cd49f8aabb3992ec847b75cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69824b01bce509d4b0a4e54cdc4858ab"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a69824b01bce509d4b0a4e54cdc4858ab">numberClientsOfNodes_</a></td></tr>
<tr class="separator:a69824b01bce509d4b0a4e54cdc4858ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd46f338625c60a95c9a6a910b5397a2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#acd46f338625c60a95c9a6a910b5397a2">nodeSizes_</a></td></tr>
<tr class="separator:acd46f338625c60a95c9a6a910b5397a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0aafd712a968fbfd99df50baa70b7a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#abc0aafd712a968fbfd99df50baa70b7a">shardSizes_</a></td></tr>
<tr class="separator:abc0aafd712a968fbfd99df50baa70b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9400fe67e9c4ed46abfaf3f78bec2799"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a9400fe67e9c4ed46abfaf3f78bec2799">clientCommBuffersCPU_</a></td></tr>
<tr class="separator:a9400fe67e9c4ed46abfaf3f78bec2799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43af5586e5e3546ac856118fd0c85a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ae43af5586e5e3546ac856118fd0c85a7">mpi_my_rank_</a> {0}</td></tr>
<tr class="separator:ae43af5586e5e3546ac856118fd0c85a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6be9873f3d40f73e48f6a2d0562ee822"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a6be9873f3d40f73e48f6a2d0562ee822">mpi_comm_world_size_</a> {1}</td></tr>
<tr class="separator:a6be9873f3d40f73e48f6a2d0562ee822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121a180232b634d915e5183022b20ede"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a121a180232b634d915e5183022b20ede">clientCommOverlap</a></td></tr>
<tr class="separator:a121a180232b634d915e5183022b20ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed8a7b40e03bf762b4982cb0e4bb745"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::thread * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#abed8a7b40e03bf762b4982cb0e4bb745">clientCommThreads_</a></td></tr>
<tr class="separator:abed8a7b40e03bf762b4982cb0e4bb745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b778a7c197def6013694262e7dbc58"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a94b778a7c197def6013694262e7dbc58">stopClientCommThreads_</a> {false}</td></tr>
<tr class="separator:a94b778a7c197def6013694262e7dbc58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05308622ab4af7cc9f2c8ab6d95920f4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a05308622ab4af7cc9f2c8ab6d95920f4">clientSummedGradsGPU</a></td></tr>
<tr class="separator:a05308622ab4af7cc9f2c8ab6d95920f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2260dec634dbf320618cd4e446fbd60f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a2260dec634dbf320618cd4e446fbd60f">clientSummedWordCounts_</a></td></tr>
<tr class="separator:a2260dec634dbf320618cd4e446fbd60f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1464195033f40e813b4621de72790d61"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a1464195033f40e813b4621de72790d61">clientCommittedWordCounts_</a></td></tr>
<tr class="separator:a1464195033f40e813b4621de72790d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f18f76ecc8e1a27c5297982748f27d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Ptr&lt; <a class="el" href="classmarian_1_1OptimizerBase.html">OptimizerBase</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a34f18f76ecc8e1a27c5297982748f27d">clientLocalOptimizers_</a></td></tr>
<tr class="separator:a34f18f76ecc8e1a27c5297982748f27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1317f3a50ea600d98e526f0adc1e2b25"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a1317f3a50ea600d98e526f0adc1e2b25">clientCommOverlapBuffersGPU_</a></td></tr>
<tr class="separator:a1317f3a50ea600d98e526f0adc1e2b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c14d102d91019dfa5910f838dfc04e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ae0c14d102d91019dfa5910f838dfc04e">clientCommOverlapBuffersFilled_</a></td></tr>
<tr class="separator:ae0c14d102d91019dfa5910f838dfc04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c0ac0525593836f70509973483765a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aa3c0ac0525593836f70509973483765a">mutexClientCommOverlapBuffersFilled_</a></td></tr>
<tr class="separator:aa3c0ac0525593836f70509973483765a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97dcaca7866b209d74dedb4dc8c6dab9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::condition_variable &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a97dcaca7866b209d74dedb4dc8c6dab9">cvClientCommOverlapBuffersFilled_</a></td></tr>
<tr class="separator:a97dcaca7866b209d74dedb4dc8c6dab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a59dc60cec22159e2cd3927d9e3994"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a29a59dc60cec22159e2cd3927d9e3994">tau_</a> {1}</td></tr>
<tr class="separator:a29a59dc60cec22159e2cd3927d9e3994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff6bf63450ebf085bcb43507ab5c71c9"><td class="memItemLeft" align="right" valign="top"><a id="aff6bf63450ebf085bcb43507ab5c71c9"></a>
std::vector&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>optDelayMutex_</b></td></tr>
<tr class="separator:aff6bf63450ebf085bcb43507ab5c71c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d1d8e9b7e09c6c02cc24d3e741c905"><td class="memItemLeft" align="right" valign="top"><a id="a75d1d8e9b7e09c6c02cc24d3e741c905"></a>
std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>delay_count</b></td></tr>
<tr class="separator:a75d1d8e9b7e09c6c02cc24d3e741c905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53595b09c1093d0ee5b19353a20cc856"><td class="memItemLeft" align="right" valign="top"><a id="a53595b09c1093d0ee5b19353a20cc856"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>totalBatchWords</b></td></tr>
<tr class="separator:a53595b09c1093d0ee5b19353a20cc856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad413550f8b86b3f6a32fe7ea3c2d8996"><td class="memItemLeft" align="right" valign="top"><a id="ad413550f8b86b3f6a32fe7ea3c2d8996"></a>
std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>accGradients</b></td></tr>
<tr class="separator:ad413550f8b86b3f6a32fe7ea3c2d8996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1d6f671df01d785c50354c0bb3bd7f1"><td class="memItemLeft" align="right" valign="top"><a id="ac1d6f671df01d785c50354c0bb3bd7f1"></a>
std::vector&lt; Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>accGradientBuffer</b></td></tr>
<tr class="separator:ac1d6f671df01d785c50354c0bb3bd7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classmarian_1_1GraphGroup"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classmarian_1_1GraphGroup')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a></td></tr>
<tr class="memitem:ac0b64371074b8a5654bfae72449c9064 inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="ac0b64371074b8a5654bfae72449c9064"></a>
Ptr&lt; <a class="el" href="classmarian_1_1Config.html">Config</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>options_</b></td></tr>
<tr class="separator:ac0b64371074b8a5654bfae72449c9064 inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7e9b90d489d561de842e5b64ec751a inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="acc7e9b90d489d561de842e5b64ec751a"></a>
Ptr&lt; <a class="el" href="classmarian_1_1OptimizerBase.html">OptimizerBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>opt_</b></td></tr>
<tr class="separator:acc7e9b90d489d561de842e5b64ec751a inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75fa5d152da0fcfe14de845ffe0cbcd inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="ac75fa5d152da0fcfe14de845ffe0cbcd"></a>
Ptr&lt; <a class="el" href="classmarian_1_1Scheduler.html">Scheduler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>scheduler_</b></td></tr>
<tr class="separator:ac75fa5d152da0fcfe14de845ffe0cbcd inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a051e1d549985ef94e73d525ae8435bfb inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="a051e1d549985ef94e73d525ae8435bfb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>finalized_</b> {false}</td></tr>
<tr class="separator:a051e1d549985ef94e73d525ae8435bfb inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d74f7d1113280bff759cb2a1a1d4b45 inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="a9d74f7d1113280bff759cb2a1a1d4b45"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>scaleLearningRate_</b></td></tr>
<tr class="separator:a9d74f7d1113280bff759cb2a1a1d4b45 inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888395fe9d8aa3fe7c2441ff55df4cfd inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memItemLeft" align="right" valign="top"><a id="a888395fe9d8aa3fe7c2441ff55df4cfd"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>avgBatchWords_</b></td></tr>
<tr class="separator:a888395fe9d8aa3fe7c2441ff55df4cfd inherit pro_attribs_classmarian_1_1GraphGroup"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:ae31bbe332543625ee1e14e5970aa4382"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#ae31bbe332543625ee1e14e5970aa4382">MPI_TAG_GRAD_PUSH_MSG_</a> {0}</td></tr>
<tr class="separator:ae31bbe332543625ee1e14e5970aa4382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc913ff7bf725b97ac8206b7ad8d5303"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#acc913ff7bf725b97ac8206b7ad8d5303">MPI_TAG_GRAD_PUSH_</a> {5}</td></tr>
<tr class="separator:acc913ff7bf725b97ac8206b7ad8d5303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182b9e38a179e622eb14ba1206f19f49"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a182b9e38a179e622eb14ba1206f19f49">MPI_TAG_PARAM_PUSH_</a> {10}</td></tr>
<tr class="separator:a182b9e38a179e622eb14ba1206f19f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48416a7c176b01a4c86a2a0d545b20d7"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#a48416a7c176b01a4c86a2a0d545b20d7">MSG_INFO_SIZE_</a> {0}</td></tr>
<tr class="separator:a48416a7c176b01a4c86a2a0d545b20d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0714e0ef9345b596e83a2f4b9e797718"><td class="memItemLeft" align="right" valign="top"><a id="a0714e0ef9345b596e83a2f4b9e797718"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>MSG_INFO_CLIENT_</b> {1}</td></tr>
<tr class="separator:a0714e0ef9345b596e83a2f4b9e797718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86122e7435fe4917455b368cb12419c9"><td class="memItemLeft" align="right" valign="top"><a id="a86122e7435fe4917455b368cb12419c9"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>MSG_INFO_BATCHWORDS_</b> {2}</td></tr>
<tr class="separator:a86122e7435fe4917455b368cb12419c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0062b3acd88d1b88d18c131c326ad6a2"><td class="memItemLeft" align="right" valign="top"><a id="a0062b3acd88d1b88d18c131c326ad6a2"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>MSG_INFO_STATUS_</b> {3}</td></tr>
<tr class="separator:a0062b3acd88d1b88d18c131c326ad6a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5f7f5b3812a3dbc1ebc07a7d87f8fc"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmarian_1_1MultiNodeGraphGroup.html#aaa5f7f5b3812a3dbc1ebc07a7d87f8fc">STATUS_NODE_TRAINING_</a> {0}</td></tr>
<tr class="separator:aaa5f7f5b3812a3dbc1ebc07a7d87f8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c5b83a1ed5fc9b3d6ce4925df374f9"><td class="memItemLeft" align="right" valign="top"><a id="ab5c5b83a1ed5fc9b3d6ce4925df374f9"></a>
static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>STATUS_NODE_FINISHED_</b> {1}</td></tr>
<tr class="separator:ab5c5b83a1ed5fc9b3d6ce4925df374f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Multi-node graph group for asynchronous training over multiple machines each with one or multiple GPUs </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a31833ee0e3fe3d72352c53088c6c4d82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31833ee0e3fe3d72352c53088c6c4d82">&#9670;&nbsp;</a></span>MultiNodeGraphGroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">marian::MultiNodeGraphGroup::MultiNodeGraphGroup </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1Config.html">Config</a> &gt;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>(Constructor) Call super class and initialize client graphs and builders. </p>

</div>
</div>
<a id="a00189cefd3be9c8c22c22ac1930d5637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00189cefd3be9c8c22c22ac1930d5637">&#9670;&nbsp;</a></span>~MultiNodeGraphGroup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual marian::MultiNodeGraphGroup::~MultiNodeGraphGroup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>(Destructor) Shut down server shard thread and (if comm. overlap enabled) communication overlap threads. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abef80e64d13d54883a7f2d3a6ed4895e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abef80e64d13d54883a7f2d3a6ed4895e">&#9670;&nbsp;</a></span>calculateNodeSizes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::calculateNodeSizes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the size of each node in the MPI world (cluster). Account for the edge case where the last node has fewer parameters because the model size is not perfectly divisible by the number of nodes. </p>

</div>
</div>
<a id="a96aaa101eea41c20f739af42fec9c85e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96aaa101eea41c20f739af42fec9c85e">&#9670;&nbsp;</a></span>calculateShardSizes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::calculateShardSizes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate the size of each shard on this node. Account for the edge case where the last shard has fewer parameters because the node size is not perfectly divisibly by the number of shards. </p>

</div>
</div>
<a id="a82fbb0b76109d6a992ef02bc4d2a83b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82fbb0b76109d6a992ef02bc4d2a83b0">&#9670;&nbsp;</a></span>collectStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Ptr&lt;<a class="el" href="classmarian_1_1data_1_1BatchStats.html">data::BatchStats</a>&gt; marian::MultiNodeGraphGroup::collectStats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Collect statistics from first client's graph. </p>

</div>
</div>
<a id="aee13b3da619fe59e4e1e2be4afc1b10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee13b3da619fe59e4e1e2be4afc1b10f">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::execute </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Execute given batch on this node, pushing/pulling the resulting gradients/parameters to/from the server shards or &ndash; if comm. overlap enabled &ndash; to/from the communication buffers, summing gradients locally if the communication thread is busy</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">batch</td><td>Batch on which to perform forward and backward passes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f2b3390b41733e9fc90c8db76a767cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2b3390b41733e9fc90c8db76a767cc">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::init </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Setup training environment and launch server thread and (if enabled) client communication overlap threads.. Includes setting up MPI, node and shard sizes, clients, server shards and communication overlap stuff.</p>
<p>Setup training environment and launch server thread and (if enabled) client communication overlap threads. Includes setting up MPI, node and shard sizes, clients, server shards and communication overlap stuff. </p>

</div>
</div>
<a id="a350f1a29dce33ccd05bff4f64afbf585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a350f1a29dce33ccd05bff4f64afbf585">&#9670;&nbsp;</a></span>initClientCommOverlapGpuTensors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::initClientCommOverlapGpuTensors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize GPU tensors required for overlapping client computations and communication. Includes secondary buffers for params/grads, buffers for locally summing gradients, and local optimizers to apply received gradients to client parameters. </p>

</div>
</div>
<a id="acc33e29e65aa5f21ba9dec1a0153e108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc33e29e65aa5f21ba9dec1a0153e108">&#9670;&nbsp;</a></span>initClientCommOverlapVars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::initClientCommOverlapVars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize variables required for overlapping client computations and communication. Includes summed and committed word counts, buffer flags, mutexes and condition variables. </p>

</div>
</div>
<a id="a5b7a90d95f0a7633cd7af685e343cb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b7a90d95f0a7633cd7af685e343cb23">&#9670;&nbsp;</a></span>initClientCpuBuffers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::initClientCpuBuffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize a CPU buffer for each client on this node for storing gradients or parameters. Required for sending GPU data through MPI to other nodes (GPU -&gt; CPU -&gt; MPI network). </p>

</div>
</div>
<a id="afac47a92750d8f86553a0db24bfffc40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afac47a92750d8f86553a0db24bfffc40">&#9670;&nbsp;</a></span>initShardGpuTensors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::initShardGpuTensors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the GPU tensors for storing the parameters and gradients of each server shard. </p>

</div>
</div>
<a id="aa0d168ef722d208a64705bd5f014d4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0d168ef722d208a64705bd5f014d4d0">&#9670;&nbsp;</a></span>launchCommOverlapThreads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::launchCommOverlapThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Launch independent threads which continually synchronize their client's gradients/parameters whenever the respective communication buffers are full. </p>

</div>
</div>
<a id="a987ce495465fef1efa0826403bc406e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987ce495465fef1efa0826403bc406e5">&#9670;&nbsp;</a></span>launchServerThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::launchServerThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Launch independent thread which continually receives gradients assigned to this shard from any client, runs the shard optimizer and sends back the updated parameters. </p>

</div>
</div>
<a id="a667246d307a44db4afe1e9700eccb2e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a667246d307a44db4afe1e9700eccb2e3">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Load models from disk if file exists and setting is not disabled </p>

<p>Implements <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a>.</p>

</div>
</div>
<a id="aac25f643f3ebcac1b7185d7edd53d753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac25f643f3ebcac1b7185d7edd53d753">&#9670;&nbsp;</a></span>loadDeviceConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::loadDeviceConfig </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; size_t &gt;&#160;</td>
          <td class="paramname"><em>deviceConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Load the GPU configuration of this node (i.e. which GPUs to use) and the number of GPUs on the other nodes. </p>

</div>
</div>
<a id="a731afb1c17bd78851dbfd18061221e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a731afb1c17bd78851dbfd18061221e9d">&#9670;&nbsp;</a></span>newTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tensor marian::MultiNodeGraphGroup::newTensor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1Backend.html">Backend</a> &gt;&#160;</td>
          <td class="paramname"><em>backend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LocalOptimizers related variables Allocate new tensor on given GPU and store allocator.</p>
<p>Allocate new tensor on given GPU and store allocator. </p>

</div>
</div>
<a id="a0f58d943fc6cfec09d3451fa0503ec94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f58d943fc6cfec09d3451fa0503ec94">&#9670;&nbsp;</a></span>runBatchThroughClientGraphs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::runBatchThroughClientGraphs </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the graphs (models) of all clients on this node with the given batch. </p>

</div>
</div>
<a id="ae82b1eb2e65a7b8cf20d3de2de8ca286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae82b1eb2e65a7b8cf20d3de2de8ca286">&#9670;&nbsp;</a></span>save() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::save </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>final</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Save model of first client's graph to disk </p>

<p>Implements <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a>.</p>

</div>
</div>
<a id="a0a014eeee7573962b7c62ed441789103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a014eeee7573962b7c62ed441789103">&#9670;&nbsp;</a></span>save() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::save </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1ExpressionGraph.html">ExpressionGraph</a> &gt;&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>final</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Save model of given graph to disk. </p>

</div>
</div>
<a id="a3f349dc4b0516dc2acf9f6604ce2138d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f349dc4b0516dc2acf9f6604ce2138d">&#9670;&nbsp;</a></span>setScheduler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::setScheduler </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1Scheduler.html">Scheduler</a> &gt;&#160;</td>
          <td class="paramname"><em>scheduler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set given scheduler to register training observers on the shard optimizers. </p>

<p>Implements <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a>.</p>

</div>
</div>
<a id="aa1d14df82066987ab98ed94e1def9ab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1d14df82066987ab98ed94e1def9ab8">&#9670;&nbsp;</a></span>setupClients()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::setupClients </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Setup clients that will compute gradients and communicate them with the server shards. There is one client per GPU. </p>

</div>
</div>
<a id="a7a5d0d8beb637cdabf9f35259264888f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5d0d8beb637cdabf9f35259264888f">&#9670;&nbsp;</a></span>setupMPI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::setupMPI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Setup MPI world size and rank of this node. </p>

</div>
</div>
<a id="a88eea2912b57b71bafe0cdb285e1bf2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88eea2912b57b71bafe0cdb285e1bf2c">&#9670;&nbsp;</a></span>setupServerShards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::setupServerShards </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Setup server shards that will receive gradients from clients, apply them to their part of the global parameters, and send them back to the same clients. There is one server shard per GPU. (Each GPU acts both as a client and as a server shard.) </p>

</div>
</div>
<a id="a0c64ff4b69437fb0351b78b51b9bff1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c64ff4b69437fb0351b78b51b9bff1c">&#9670;&nbsp;</a></span>shutDownCommOverlapThreads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::shutDownCommOverlapThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely shut down the launched communication overlap threads </p>

</div>
</div>
<a id="abac97e7cca7bead4e7a991a452d5dccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abac97e7cca7bead4e7a991a452d5dccd">&#9670;&nbsp;</a></span>shutDownServerThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::shutDownServerThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely shut down the launched server shard thread. </p>

</div>
</div>
<a id="a124becc314f5d43893757f38c815d3c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124becc314f5d43893757f38c815d3c5">&#9670;&nbsp;</a></span>signalFinishedToServerShards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::signalFinishedToServerShards </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Notify server shards that this node has finished training. </p>

</div>
</div>
<a id="a9c9c4690c1968c497a659d38ac06b068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c9c4690c1968c497a659d38ac06b068">&#9670;&nbsp;</a></span>synchronizeWithServerShards()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::synchronizeWithServerShards </td>
          <td>(</td>
          <td class="paramtype">Tensor&#160;</td>
          <td class="paramname"><em>newGrads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Tensor&#160;</td>
          <td class="paramname"><em>oldParams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>batchWords</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send new gradients to the server shards and receive the updated (global) parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newGrads</td><td>Gradients to send </td></tr>
    <tr><td class="paramname">oldParams</td><td><a class="el" href="classmarian_1_1Parameters.html">Parameters</a> to replace </td></tr>
    <tr><td class="paramname">gpu</td><td>GPU/client performing synchronize (to access appropriate buffers etc.) </td></tr>
    <tr><td class="paramname">batchWords</td><td>Number of batch words to pass to server shard optimizers </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acd5401b9e733d09a63454e27ce15ef51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd5401b9e733d09a63454e27ce15ef51">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void marian::MultiNodeGraphGroup::update </td>
          <td>(</td>
          <td class="paramtype">Ptr&lt; <a class="el" href="classmarian_1_1data_1_1Batch.html">data::Batch</a> &gt;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update any client model with given batch if batch is assigned to this node. </p>

<p>Implements <a class="el" href="classmarian_1_1GraphGroup.html">marian::GraphGroup</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a84ff84fbfa935667bb300eeec3398ce3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ff84fbfa935667bb300eeec3398ce3">&#9670;&nbsp;</a></span>allocators_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Ptr&lt;<a class="el" href="classmarian_1_1TensorAllocator.html">TensorAllocator</a>&gt; &gt; marian::MultiNodeGraphGroup::allocators_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Memory allocators for tensors (GPUs). </p>

</div>
</div>
<a id="af33edb88079b692db2be9da60f461e1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33edb88079b692db2be9da60f461e1d">&#9670;&nbsp;</a></span>batchIter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t marian::MultiNodeGraphGroup::batchIter_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Batch number counter used for evenly distributing mini-batches across nodes. </p>

</div>
</div>
<a id="a342faadc2dfc096266ff5ced4ce2146a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a342faadc2dfc096266ff5ced4ce2146a">&#9670;&nbsp;</a></span>clientBuilders_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Ptr&lt;<a class="el" href="classmarian_1_1models_1_1ModelBase.html">models::ModelBase</a>&gt; &gt; marian::MultiNodeGraphGroup::clientBuilders_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Graph builders for clients (which run forward and backward passes). </p>

</div>
</div>
<a id="a9400fe67e9c4ed46abfaf3f78bec2799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9400fe67e9c4ed46abfaf3f78bec2799">&#9670;&nbsp;</a></span>clientCommBuffersCPU_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;float&gt; &gt; marian::MultiNodeGraphGroup::clientCommBuffersCPU_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>CPU buffer for sending gradients and receiving parameters via MPI. </p>

</div>
</div>
<a id="a1464195033f40e813b4621de72790d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1464195033f40e813b4621de72790d61">&#9670;&nbsp;</a></span>clientCommittedWordCounts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; marian::MultiNodeGraphGroup::clientCommittedWordCounts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Word counts of clients submitted to overlapping/communication thread for current mini-batch. </p>

</div>
</div>
<a id="a121a180232b634d915e5183022b20ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121a180232b634d915e5183022b20ede">&#9670;&nbsp;</a></span>clientCommOverlap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool marian::MultiNodeGraphGroup::clientCommOverlap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether client computations should continue while gradients and parameters are being exchanged with server shards. </p>

</div>
</div>
<a id="ae0c14d102d91019dfa5910f838dfc04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0c14d102d91019dfa5910f838dfc04e">&#9670;&nbsp;</a></span>clientCommOverlapBuffersFilled_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;bool&gt; marian::MultiNodeGraphGroup::clientCommOverlapBuffersFilled_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flags to indicate whether a client's communication buffer is filled, in which case the communication thread will exchange the data with server shards. </p>

</div>
</div>
<a id="a1317f3a50ea600d98e526f0adc1e2b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1317f3a50ea600d98e526f0adc1e2b25">&#9670;&nbsp;</a></span>clientCommOverlapBuffersGPU_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Tensor&gt; marian::MultiNodeGraphGroup::clientCommOverlapBuffersGPU_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GPU buffers used by clients to copy gradients to for use by the communication threads. </p>

</div>
</div>
<a id="abed8a7b40e03bf762b4982cb0e4bb745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed8a7b40e03bf762b4982cb0e4bb745">&#9670;&nbsp;</a></span>clientCommThreads_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::thread*&gt; marian::MultiNodeGraphGroup::clientCommThreads_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Threads for client communication overlap. They send gradients and receive gradients to/from the server shards when the communication buffer is filled. </p>

</div>
</div>
<a id="a54796591790abe80e914b9142e3cb6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54796591790abe80e914b9142e3cb6f2">&#9670;&nbsp;</a></span>clientGraphs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Ptr&lt;<a class="el" href="classmarian_1_1ExpressionGraph.html">ExpressionGraph</a>&gt; &gt; marian::MultiNodeGraphGroup::clientGraphs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Graphs of clients. </p>

</div>
</div>
<a id="a34f18f76ecc8e1a27c5297982748f27d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f18f76ecc8e1a27c5297982748f27d">&#9670;&nbsp;</a></span>clientLocalOptimizers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Ptr&lt;<a class="el" href="classmarian_1_1OptimizerBase.html">OptimizerBase</a>&gt; &gt; marian::MultiNodeGraphGroup::clientLocalOptimizers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Optimizers used locally by clients to apply gradients from the communication thread to their graph's parameters. </p>

</div>
</div>
<a id="a05308622ab4af7cc9f2c8ab6d95920f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05308622ab4af7cc9f2c8ab6d95920f4">&#9670;&nbsp;</a></span>clientSummedGradsGPU</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Tensor&gt; marian::MultiNodeGraphGroup::clientSummedGradsGPU</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GPU buffer (tensor) to sum up gradients computed by the clients. Used to enable clients to proceed with computations while waiting for communication channel to become available. </p>

</div>
</div>
<a id="a2260dec634dbf320618cd4e446fbd60f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2260dec634dbf320618cd4e446fbd60f">&#9670;&nbsp;</a></span>clientSummedWordCounts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; marian::MultiNodeGraphGroup::clientSummedWordCounts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Summed word counts of clients. Used for overlap purposes. </p>

</div>
</div>
<a id="a946e4ba36387648bbcfa2b6469b726b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946e4ba36387648bbcfa2b6469b726b9">&#9670;&nbsp;</a></span>clientThreadPool_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ThreadPool* marian::MultiNodeGraphGroup::clientThreadPool_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread pool to enable clients to run concurrently. </p>

</div>
</div>
<a id="a97dcaca7866b209d74dedb4dc8c6dab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97dcaca7866b209d74dedb4dc8c6dab9">&#9670;&nbsp;</a></span>cvClientCommOverlapBuffersFilled_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::condition_variable&gt; marian::MultiNodeGraphGroup::cvClientCommOverlapBuffersFilled_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Condition variable to notify communication threads that their buffers have been filled. </p>

</div>
</div>
<a id="ab1f7957b2900e161ba7f759331a3141a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f7957b2900e161ba7f759331a3141a">&#9670;&nbsp;</a></span>devices_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; marian::MultiNodeGraphGroup::devices_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Devices (GPUs) on this node. </p>

</div>
</div>
<a id="a12cef92d07f909dcd5af15567ad379d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12cef92d07f909dcd5af15567ad379d0">&#9670;&nbsp;</a></span>initialized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool marian::MultiNodeGraphGroup::initialized_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether graph group has been properly initialized with a first batch. </p>

</div>
</div>
<a id="a6be9873f3d40f73e48f6a2d0562ee822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6be9873f3d40f73e48f6a2d0562ee822">&#9670;&nbsp;</a></span>mpi_comm_world_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int marian::MultiNodeGraphGroup::mpi_comm_world_size_ {1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of nodes in MPI world (cluster). </p>

</div>
</div>
<a id="ae43af5586e5e3546ac856118fd0c85a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43af5586e5e3546ac856118fd0c85a7">&#9670;&nbsp;</a></span>mpi_my_rank_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int marian::MultiNodeGraphGroup::mpi_my_rank_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>MPI rank of this node. </p>

</div>
</div>
<a id="acc913ff7bf725b97ac8206b7ad8d5303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc913ff7bf725b97ac8206b7ad8d5303">&#9670;&nbsp;</a></span>MPI_TAG_GRAD_PUSH_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int marian::MultiNodeGraphGroup::MPI_TAG_GRAD_PUSH_ {5}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate that an MPI message contains gradient (client -&gt; server). </p>

</div>
</div>
<a id="ae31bbe332543625ee1e14e5970aa4382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31bbe332543625ee1e14e5970aa4382">&#9670;&nbsp;</a></span>MPI_TAG_GRAD_PUSH_MSG_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int marian::MultiNodeGraphGroup::MPI_TAG_GRAD_PUSH_MSG_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate that an MPI message contains message info before sending the gradient (client -&gt; server). </p>

</div>
</div>
<a id="a182b9e38a179e622eb14ba1206f19f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a182b9e38a179e622eb14ba1206f19f49">&#9670;&nbsp;</a></span>MPI_TAG_PARAM_PUSH_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int marian::MultiNodeGraphGroup::MPI_TAG_PARAM_PUSH_ {10}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag to indicate that an MPI message contains parameters (server -&gt; client). </p>

</div>
</div>
<a id="a48416a7c176b01a4c86a2a0d545b20d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48416a7c176b01a4c86a2a0d545b20d7">&#9670;&nbsp;</a></span>MSG_INFO_SIZE_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int marian::MultiNodeGraphGroup::MSG_INFO_SIZE_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Message info indices: 0 = size; 1 = originating client; 2 = number of batch words; 3 = status of node </p>

</div>
</div>
<a id="aa3c0ac0525593836f70509973483765a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c0ac0525593836f70509973483765a">&#9670;&nbsp;</a></span>mutexClientCommOverlapBuffersFilled_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::mutex&gt; marian::MultiNodeGraphGroup::mutexClientCommOverlapBuffersFilled_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex to enable communication thread to wait for its buffers to be filled. </p>

</div>
</div>
<a id="a5828f1a7e2fdcbaa20cec8dad5b0a3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5828f1a7e2fdcbaa20cec8dad5b0a3f1">&#9670;&nbsp;</a></span>mutexClientInit_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex marian::MultiNodeGraphGroup::mutexClientInit_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex to ensure clients are uniquely assigned to graphs and builders. </p>

</div>
</div>
<a id="acd46f338625c60a95c9a6a910b5397a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd46f338625c60a95c9a6a910b5397a2">&#9670;&nbsp;</a></span>nodeSizes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; marian::MultiNodeGraphGroup::nodeSizes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of parameters allocated (sharded) to nodes. </p>

</div>
</div>
<a id="a69824b01bce509d4b0a4e54cdc4858ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69824b01bce509d4b0a4e54cdc4858ab">&#9670;&nbsp;</a></span>numberClientsOfNodes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; marian::MultiNodeGraphGroup::numberClientsOfNodes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of clients on nodes in MPI world (cluster). </p>

</div>
</div>
<a id="aa32a75587c2c31f01dae3bd990abd73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa32a75587c2c31f01dae3bd990abd73b">&#9670;&nbsp;</a></span>schedulerMutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex marian::MultiNodeGraphGroup::schedulerMutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex to avoid race conditions in scheduler. </p>

</div>
</div>
<a id="aaca55146090dc27eedaf7d1b8aef9a12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca55146090dc27eedaf7d1b8aef9a12">&#9670;&nbsp;</a></span>serverShardBufferCPU_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; marian::MultiNodeGraphGroup::serverShardBufferCPU_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main server CPU buffer to enable MPI sending and receiving (GPU -&gt; CPU -&gt; Network -&gt; CPU -&gt; GPU). </p>

</div>
</div>
<a id="a858e4728340e16cbcbabbe11786ddff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858e4728340e16cbcbabbe11786ddff6">&#9670;&nbsp;</a></span>serverShardThread_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread* marian::MultiNodeGraphGroup::serverShardThread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main server thread that continually receives gradients from a client, copies them to the shards on this node, runs the shard optimizers and then returns the result to that client. </p>

</div>
</div>
<a id="ae782e428f11b35ba7d407cd689425354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae782e428f11b35ba7d407cd689425354">&#9670;&nbsp;</a></span>shardGrads_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Tensor&gt; marian::MultiNodeGraphGroup::shardGrads_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GPU buffer to store gradients received by this node's server thread, so that they can be applied to the shard parameters. </p>

</div>
</div>
<a id="a929f87c2cd49f8aabb3992ec847b75cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a929f87c2cd49f8aabb3992ec847b75cb">&#9670;&nbsp;</a></span>shardMutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::mutex&gt; marian::MultiNodeGraphGroup::shardMutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex to enforce critical sections in server shards. </p>

</div>
</div>
<a id="a4b81e7bbe877f67931f38cdc3cc8fc6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b81e7bbe877f67931f38cdc3cc8fc6d">&#9670;&nbsp;</a></span>shardOptimizers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Ptr&lt;<a class="el" href="classmarian_1_1OptimizerBase.html">OptimizerBase</a>&gt; &gt; marian::MultiNodeGraphGroup::shardOptimizers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Server shard optimizers used to update global parameters with gradients received from clients. </p>

</div>
</div>
<a id="aeacc10ea2646efd5f8bab29b9febfb6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeacc10ea2646efd5f8bab29b9febfb6e">&#9670;&nbsp;</a></span>shardParams_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Tensor&gt; marian::MultiNodeGraphGroup::shardParams_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Parts of the global parameters that are assigned to server shards on this node. </p>

</div>
</div>
<a id="abc0aafd712a968fbfd99df50baa70b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0aafd712a968fbfd99df50baa70b7a">&#9670;&nbsp;</a></span>shardSizes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;size_t&gt; marian::MultiNodeGraphGroup::shardSizes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of parameters allocated to shards on THIS node. </p>

</div>
</div>
<a id="aaa5f7f5b3812a3dbc1ebc07a7d87f8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5f7f5b3812a3dbc1ebc07a7d87f8fc">&#9670;&nbsp;</a></span>STATUS_NODE_TRAINING_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int marian::MultiNodeGraphGroup::STATUS_NODE_TRAINING_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Status of node: 0 = training; 1 = finished. Used to indicate to other nodes whether this node is still training. </p>

</div>
</div>
<a id="a94b778a7c197def6013694262e7dbc58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94b778a7c197def6013694262e7dbc58">&#9670;&nbsp;</a></span>stopClientCommThreads_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool marian::MultiNodeGraphGroup::stopClientCommThreads_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flags indicating whether the client overlapping communication threads should stop. </p>

</div>
</div>
<a id="a29a59dc60cec22159e2cd3927d9e3994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29a59dc60cec22159e2cd3927d9e3994">&#9670;&nbsp;</a></span>tau_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t marian::MultiNodeGraphGroup::tau_ {1}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Variables for optimizer delay </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>marian/src/training/<a class="el" href="graph__group__multinode_8h_source.html">graph_group_multinode.h</a></li>
<li>marian/src/training/graph_group_multinode.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 26 2018 21:59:37 for Marian by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
